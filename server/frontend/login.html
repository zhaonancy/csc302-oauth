<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="OAuth, created by The Dissidents">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth - Sign In</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="stylesheet" type="text/css" href="/styles/main.css">
</head>
<body>
<div class="main">
	<form id="login" action="/login" method="post">
		<h1>OAuth</h1>
		<p align="right">created by <a href="https://github.com/zhaonancy/csc302-oauth">The Dissidents</a>&nbsp;</p>
		<hr>

		<table>
			<tr>
				<td align="right"><label for="username">Username:</label></td>
				<td><input type="text" placeholder="Type your username" name="username" required></td>
			</tr>
			<tr>
				<td align="right"><label for="password">Password:</label></td>
				<td><input type="password" placeholder="Type your password" name="password" required></td>
			</tr>
		</table>

		<input type="hidden" name="clientRedirectUrl" id="client-redirect-url-input" value="" />
		<input type="submit" value="Sign In">
	</form>

	<p align="center"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Need help signing in?</a></p>
</div>
</body>
<script>
	// Get client redirect url from the current URL
	let params = new URLSearchParams(document.location.search)
	let clientRedirectUrl = params.get('redirect')
	if (clientRedirectUrl === null) {
		console.error('No redirect URL specified')
	} else {
		document.querySelector('#client-redirect-url-input').value = clientRedirectUrl
	}
</script>
</html>
